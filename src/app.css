@import 'tailwindcss';

/* =============================================================================
   COHEARA TOKEN SYSTEM — 22-UX-TOKENS Implementation

   3-level architecture:
     L1 Primitive  → Raw values (Tailwind built-ins + custom additions)
     L2 Semantic   → Purpose-driven aliases (components consume THESE)
     L3 Component  → Scoped overrides (in component <style> blocks)

   Source: Specs/components/22-UX-TOKENS.md
   ============================================================================= */

@theme {
  /* === PRIMARY ACTION (T3) === */
  /* Calm blue: professional authority without clinical coldness (CP3) */
  --color-primary: #4A6FA5;
  --color-primary-hover: #3D5F91;
  --color-primary-active: #345280;
  --color-primary-50: #EDF2F8;
  --color-primary-100: #D4E0F0;

  /* === WARM SHADOWS (T10) === */
  /* Stone-900 based shadows — warm, not cold gray */
  --shadow-warm-sm: 0 1px 2px 0 rgb(28 25 23 / 0.05);
  --shadow-warm-md: 0 4px 6px -1px rgb(28 25 23 / 0.07),
                    0 2px 4px -2px rgb(28 25 23 / 0.05);
  --shadow-warm-lg: 0 10px 15px -3px rgb(28 25 23 / 0.08),
                    0 4px 6px -4px rgb(28 25 23 / 0.04);
  --shadow-warm-xl: 0 20px 25px -5px rgb(28 25 23 / 0.10),
                    0 8px 10px -6px rgb(28 25 23 / 0.05);

  /* === LAYOUT CONSTANTS (T8) === */
  --width-content-reading: 48rem;
  --width-content-data: 56rem;
  --width-content-full: 64rem;

  /* === MOTION (T11) === */
  --duration-instant: 75ms;
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --duration-slow: 400ms;

  --ease-default: cubic-bezier(0.25, 0.1, 0.25, 1.0);
  --ease-in: cubic-bezier(0.42, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.58, 1);
}

/* === SEMANTIC TOKENS (T1-T5) ===
   Defined as CSS custom properties on :root.
   Components reference these via var(), not raw Tailwind colors. */
:root {
  /* Surface system (T1) */
  --surface-base: var(--color-stone-50, #fafaf9);
  --surface-raised: #ffffff;
  --surface-overlay: #ffffff;
  --surface-input: #ffffff;
  --surface-hover: var(--color-stone-100, #f5f5f4);
  --surface-active: var(--color-stone-200, #e7e5e3);
  --surface-selected: var(--color-stone-100, #f5f5f4);
  --surface-muted: var(--color-stone-100, #f5f5f4);

  /* Text system (T2) */
  --text-primary: var(--color-stone-900, #1c1917);
  --text-secondary: var(--color-stone-700, #44403c);
  --text-muted: var(--color-stone-500, #78716c);
  --text-placeholder: var(--color-stone-400, #a8a29e);
  --text-disabled: var(--color-stone-300, #d6d3d1);
  --text-inverse: #ffffff;

  /* Structural (T5) */
  --border-default: var(--color-stone-200, #e7e5e3);
  --border-subtle: var(--color-stone-100, #f5f5f4);
  --border-strong: var(--color-stone-300, #d6d3d1);
  --border-focus: var(--color-primary);
  --border-input: var(--color-stone-300, #d6d3d1);
  --border-input-focus: var(--color-primary);

  /* Typography (T6) */
  --font-body: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', 'Cascadia Code', 'Fira Code', monospace;

  /* Layout (T8) */
  --tab-bar-height: 4rem;
  --header-height: 3.5rem;
  --input-min-height: 2.75rem;
  --touch-target: 2.75rem;

  /* Interactive colors (T3) */
  --color-interactive: var(--color-teal-600, #0d9488);
  --color-interactive-hover: var(--color-teal-700, #0f766e);
  --color-interactive-active: var(--color-teal-800, #115e59);
  --color-interactive-50: var(--color-teal-50, #f0fdfa);

  /* Semantic status colors (T3) */
  --color-success: var(--color-green-600, #16a34a);
  --color-success-50: var(--color-green-50, #f0fdf4);
  --color-success-200: var(--color-green-200, #bbf7d0);
  --color-success-800: var(--color-green-800, #166534);

  --color-warning: var(--color-amber-500, #f59e0b);
  --color-warning-50: var(--color-amber-50, #fffbeb);
  --color-warning-200: var(--color-amber-200, #fde68a);
  --color-warning-800: var(--color-amber-800, #92400e);

  --color-danger: var(--color-red-600, #dc2626);
  --color-danger-50: var(--color-red-50, #fef2f2);
  --color-danger-200: var(--color-red-200, #fecaca);
  --color-danger-800: var(--color-red-800, #991b1b);

  --color-info: var(--color-blue-500, #3b82f6);
  --color-info-50: var(--color-blue-50, #eff6ff);
  --color-info-200: var(--color-blue-200, #bfdbfe);
  --color-info-800: var(--color-blue-800, #1e40af);

  /* Confidence level colors (T4) */
  --confidence-high-bg: var(--color-success-50);
  --confidence-high-border: var(--color-success-200);
  --confidence-high-text: var(--color-success-800);

  --confidence-medium-bg: var(--color-warning-50);
  --confidence-medium-border: var(--color-warning-200);
  --confidence-medium-text: var(--color-warning-800);

  --confidence-low-bg: var(--color-danger-50);
  --confidence-low-border: var(--color-danger-200);
  --confidence-low-text: var(--color-danger-800);

  /* Medication status colors (T4) */
  --med-active: var(--color-success);
  --med-active-bg: var(--color-success-50);
  --med-paused: var(--color-warning);
  --med-paused-bg: var(--color-warning-50);
  --med-stopped: var(--color-danger);
  --med-stopped-bg: var(--color-danger-50);
  --med-prn: var(--color-info);
  --med-prn-bg: var(--color-info-50);

  /* Severity scale colors (T4) */
  --severity-none: var(--color-stone-300, #d6d3d1);
  --severity-mild: var(--color-green-400, #4ade80);
  --severity-moderate: var(--color-amber-400, #fbbf24);
  --severity-severe: var(--color-orange-500, #f97316);
  --severity-critical: var(--color-red-500, #ef4444);

  /* Z-Index protocol (T12) */
  --z-base: 0;
  --z-sticky: 10;
  --z-dropdown: 20;
  --z-modal: 30;
  --z-toast: 40;
  --z-tab-bar: 50;
}

/* === BASE STYLES === */

html {
  font-family: var(--font-body);
  font-size: 16px;
  line-height: 1.6;
}

/* Focus visible for keyboard navigation (T5) */
*:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
}

/* Minimum touch target (ACC — 44x44) for interactive elements */
button, a, input, select, textarea, [role="button"] {
  min-height: 44px;
}

/* === REDUCED MOTION (T11) === */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* === CUSTOM ANIMATIONS === */

/* Q.4: Indeterminate progress bar */
@keyframes indeterminate {
  0% { transform: translateX(-100%); width: 40%; }
  50% { transform: translateX(100%); width: 60%; }
  100% { transform: translateX(250%); width: 40%; }
}
.animate-indeterminate {
  animation: indeterminate 1.8s ease-in-out infinite;
}

/* Slide-down animation for toast notifications */
@keyframes slide-down {
  from { transform: translate(-50%, -100%); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}
.animate-slide-down {
  animation: slide-down var(--duration-normal) var(--ease-out);
}

/* =============================================================================
   MARKDOWN RENDERING — Spec 48 [CA-03]
   Safe markdown styles for AI response content in chat bubbles.
   ============================================================================= */
.md-code {
  font-family: ui-monospace, monospace;
  font-size: 0.875em;
  background: var(--color-primary-50);
  padding: 0.1em 0.35em;
  border-radius: 0.25rem;
}
.md-heading {
  font-weight: 600;
  margin-top: 0.75rem;
  margin-bottom: 0.25rem;
  color: var(--color-stone-800, #1c1917);
}
h3.md-heading { font-size: 1rem; }
h4.md-heading { font-size: 0.9375rem; }
h5.md-heading { font-size: 0.875rem; }
.md-list {
  margin: 0.5rem 0;
  padding-left: 1.25rem;
}
.md-list li {
  margin-bottom: 0.25rem;
  line-height: 1.5;
}
ul.md-list { list-style: disc; }
ol.md-list { list-style: decimal; }
.md-hr {
  border: 0;
  border-top: 1px solid var(--color-stone-200, #e7e5e4);
  margin: 0.75rem 0;
}
.md-table-wrap {
  overflow-x: auto;
  margin: 0.5rem 0;
}
.md-table {
  border-collapse: collapse;
  font-size: 0.875rem;
  width: 100%;
}
.md-table th,
.md-table td {
  padding: 0.375rem 0.625rem;
  border: 1px solid var(--color-stone-200, #e7e5e4);
  text-align: left;
}
.md-table th {
  background: var(--color-stone-50, #fafaf9);
  font-weight: 600;
}
